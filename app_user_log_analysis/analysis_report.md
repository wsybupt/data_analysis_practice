# APP用户日志分析

本文档分析的是前公司的一款计步app的用户日志，以APP代指该应用名。

## 一、分析背景与目的

APP在应用市场排名出现下降，与此同时一家竞品出现大幅攀升。引发我们的思考，我们在计步准确性上与竞品是否存在差异？ 计步类APP用户最在意的是步数多少，一般宁可多计，不要少计，因此我们思考是否我们的过滤算法太过苛刻。 所以项目组采取了两方面行动，一方面，我们收取一部分用户日志，对其进行数据分析；另一方面，对竞品进行反编译查看竞品算法中的过滤条件。

通过对用户日志进行分析，主要达到两个目的：

1. 分析得到各种过滤算法发生的用户占比。
2. 对比新老用户各方面差异，从而得出用户离开app的原因。

## 二、数据说明

### 1.数据来源

app内的日志，以xlog格式保存，回收之后解析成文本结构，使用python和正则表达式解析和统计生成csv文件，共计5,142条日志数据。 

### 2. 字段说明

| 字段               | 含义                      |
| ------------------ | ------------------------- |
| account_id         | 用户账号id                |
| neg                | 步数为负                  |
| time_neg           | 时间为负                  |
| big                | 大数（超过1,000,000的）   |
| big_100_000_000    | 大数（超过100,000,000的） |
| step_desc          | 步数回退                  |
| time_desc          | 时间回退                  |
| step_diff_too_big  | 步数差过大                |
| step_too_fast_5    | 速度过快（一秒5步）       |
| step_too_fast_10   | 速度过快（一秒10步）      |
| step_too_fast_20   | 速度过快（一秒20步）      |
| step_too_fast_50   | 速度过快（一秒50步）      |
| step_too_fast_100  | 速度过快（一秒100步）     |
| step_too_fast_200  | 速度过快（一秒200步）     |
| step_too_fast_1000 | 速度过快（一秒1000步）    |

### 3.数据清洗

数据清洗主要做了去掉重复值，缺失值填充。

## 三、分析结果

### 1. 步数为负

在新老用户中，都没有发生步数为负的情况。

### 2. 时间为负

新老用户中，步数为负数的，各有一个用户发生。

### 3.步数回退

| 指标   | 新用户组 | 老用户组 |
| ------ | -------- | -------- |
| 人数   | 32       | 41       |
| 比例   | 1.25%    | 1.58%    |
| 总人数 | 2551     | 2591     |

经过计算，z= 0.99，不显著

### 4. 时间回退
| 指标   | 新用户组 | 老用户组 |
| ------ | -------- | -------- |
| 人数   | 647      | 700      |
| 比例   | 25.36%   | 27.02%   |
| 总人数 | 2551     | 2591     |

经过计算，z= 1.34，不显著


### 5. 大数问题

现有算法中的设定的传感器最大步数为1,000,000，传感器步数超过这个限制APP就会不记步。

| 指标   | 新用户组 | 老用户组 |
| ------ | -------- | -------- |
| 人数   | 8        | 3        |
| 比例   | 0.31%    | 0.12%    |
| 总人数 | 2551     | 2591     |

经过计算，z= 1.53，不显著。



若将这个数值扩大100倍，更改为100,000,000，超过这个限制的新用户仍有7人，老用户为1人。

辞职经过计算，z= 2.13>1.96，显著区别，可信度为95%。

经过对新用户这7人进行细致查看发现，6个用户的手机型号为Lenovo A7020a48，这个型号是我们已知的传感器非常不稳定的型号，传感器基本无法正常工作。因此老用户经过自然筛选，基本没有这种类型的用户。而且这个问题我们无法解决（手机硬件故障）。这个机型的问题，造成新老用户在超100,000,000的大数上存在显著差别。

结论：上限增大100倍到100,000,000的话，现有计算能力可以满足，可以减少对用户步数的过滤，可减少个别用户不能使用的情况。

### 6.步数差过大

| 指标   | 新用户组 | 老用户组 |
| ------ | -------- | -------- |
| 人数   | 3        | 4        |
| 比例   | 0.12%    | 0.15%    |
| 总人数 | 2551     | 2591     |

经过计算，z= 0.35，不显著。

### 7.速度过快

我们目前的过滤算法是当用户的计步速度超过一秒5步时，即认为速度过快，过滤掉这些步数，目的在于过滤掉不正常的步数增长。

但是实际上这有可能是因为用户的传感器工作原理导致，将一段时间的步数在一个时间点传送给程序，因此需要进行调整。具体是调整成一秒多少步作为限制，我们用了用户的日志进行了分析。结果如下：

| 指标       | 新用户组 | 老用户组 | z值   |
| ---------- | -------- | -------- | ----- |
| 一秒5步    | 25.75%   | 30.18%   | -3.54 |
| 一秒10步   | 11.68%   | 13.24%   | -1.69 |
| 一秒20步   | 6.8%     | 8.1%     | -1.75 |
| 一秒50步   | 4.35%    | 5.01%    | -1.19 |
| 一秒100步  | 2.43%    | 2.70%    | -0.62 |
| 一秒200步  | 1.25%    | 1.12%    | 0.45  |
| 一秒1000步 | 0.31%    | 0.12%    | 1.53  |

根据以上数据 ，可以看到：

1. 所有的速度判断中，发生的人数比例中，新用户比例都低于老用户，显示老用户发生步数过快的情况更多。
2. 一秒5步的用户在新用户中占比低于老用户中的占比情况，且显著；其他几种类型的过快，新老用户差异达不到显著的程度。

## 四、结论

衡量了几种过滤条件的发生情况，在新老用户中差异显著的有大数问题和速度过快两项。

大数问题主要是因为问题机型的存在，这种机型的有一部分传感器有问题，所以在老用户中被自动过滤掉了，因此新老用户中存在差异。当前设定的大数，一些手机在长时间没有关机的情况下，可以触及到会导致不记步，因此应该把上限增大至100,000,000的话，现有计算能力可以满足。

速度过快的问题。我们算法目前采用的是一秒5步的过滤条件，在老用户中30%的用户都会存在，即30%的用户会因为这个限制过滤掉步数，这个比例比较大。参考竞品的做法，这个数值可以调整到一秒20步，并且增加阶梯型的步数判断。

## 五、思考

1. 只考虑了用户占比，没有考虑次数占比，次数与用户数相关，比如一个用户容易发生时间回退，那么在他的日志里，次数比一定也是更高的，这两个是相关的，比较的意义大吗？
2. 不能体现活跃时长的差异，保活好不好的对比，这可能是影响用户的最大因素。

